<h1>Import Data</h1>

<section>
  <form>
    <div class="form-control">
      <label for="data-type">Data Type</label>
      <p-dropdown
        id="data-type"
        [options]="dataTypeOptions"
        [(ngModel)]="selectedDataType"
        name="importDataType"
      />
    </div>
    <div class="form-control">
      <label for="file-location">File Location:</label>
      <input type="file"
             id="file-location"
             name="datafile"
             (change)="onFileChange($event)"
      >
    </div>
    <button (click)="onNextButtonClicked()">Next</button>
  </form>
  <div *ngIf="dataImported">
    <div class="mb-3">
      <p-button
        type="button"
        icon="pi pi-chevron-left"
        (click)="prev()"
        [disabled]="isFirstPage()"
        styleClass="p-button-text" />
      <p-button
        type="button"
        icon="pi pi-refresh"
        (click)="reset()"
        styleClass="p-button-text" />
      <p-button
        type="button"
        icon="pi pi-chevron-right"
        (click)="next()"
        [disabled]="isLastPage()"
        styleClass="p-button-text" />
    </div>
    <p-table [value]="parsedDataFile"
             responsiveLayout="stack"
             [breakpoint]="'960px'"
             [paginator]="true"
             [rows]="50"
             [first]="first"
      styleClass="p-datatable-striped"
    >
      <ng-template pTemplate="header">
        <tr>
          <th style="width:1%">{{parsedDataFile[0].split(',')[0]}}</th>
          <th style="width:1%">{{parsedDataFile[0].split(',')[2]}}</th>
          <th style="width:1%">{{parsedDataFile[0].split(',')[8]}}</th>
          <th style="width:3%">{{parsedDataFile[0].split(',')[9]}}</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-tablerows>
        <tr>
          <td>{{tablerows.split(',')[0]}}</td>
          <td>{{tablerows.split(',')[2]}}</td>
          <td>{{tablerows.split(',')[8]}}</td>
          <td>{{tablerows.split(',')[9]}}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</section>